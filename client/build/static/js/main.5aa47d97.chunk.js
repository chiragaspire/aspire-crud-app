(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,a){e.exports={header:"MainNavigation_header__pcWBd",logo:"MainNavigation_logo__3mTft",nav:"MainNavigation_nav__2KJfX",active:"MainNavigation_active__oN3Ka"}},15:function(e,t,a){e.exports={card:"Admin_card__1aJw1",actions:"Admin_actions__3N2Y-",delete:"Admin_delete__1n796",icon:"Admin_icon__1TNpI",navpage:"Admin_navpage__35mZ8"}},20:function(e,t,a){e.exports={footer:"Footer_footer__28pE7",nav:"Footer_nav__2T3QJ",active:"Footer_active__1Y7Ga"}},3:function(e,t,a){e.exports={form:"Form_form__2hemT",loading:"Form_loading__1F3Th",control:"Form_control__g5TiA",imgcontrol:"Form_imgcontrol__3MFUj",actions:"Form_actions__3Xb7K",actions_delete:"Form_actions_delete__UQ68K",delete:"Form_delete__wXEOB"}},33:function(e,t,a){e.exports={main:"Layout_main__auk_r"}},34:function(e,t,a){e.exports={typography:"Homepage_typography__1gVpD"}},35:function(e,t,a){e.exports={card:"Card_card__1m44e"}},40:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(31),o=a.n(c),s=(a(40),a(7)),l=a(5),i=a(4),u=a.n(i),j=a(8),d=a(2),m=a(20),b=a.n(m),p=a(0),h=function(){Object(l.g)(),localStorage.getItem("token"),localStorage.getItem("usertype");return Object(p.jsx)("footer",{className:b.a.footer,children:Object(p.jsx)("nav",{className:b.a.nav,children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:"Created by Chirag Patel. \xa9 2021"})})})})},O=a(33),x=a.n(O),g=a(13),f=a.n(g),v=function(){var e=Object(l.g)(),t=localStorage.getItem("token"),a=localStorage.getItem("usertype"),n=function(){var a=Object(j.a)(u.a.mark((function a(){var n,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("/logout/me",{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t)}});case 3:return n=a.sent,a.next=6,n.json();case 6:if(r=a.sent,500!==n.status){a.next=9;break}throw new Error(r.error);case 9:alert("Logout successfully."),localStorage.removeItem("token"),localStorage.removeItem("userEmail"),localStorage.removeItem("usertype"),t=null,e.push("/login"),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),alert(a.t0);case 20:case"end":return a.stop()}}),a,null,[[0,17]])})));return function(){return a.apply(this,arguments)}}();return null==t&&l.a,Object(p.jsxs)("header",{className:f.a.header,children:[Object(p.jsxs)("div",{className:f.a.logo,children:[Object(p.jsx)("img",{src:"/img/mainlogo.jpg"}),"\xa0 Aspire EMS"]}),Object(p.jsx)("nav",{className:f.a.nav,children:Object(p.jsxs)("ul",{children:[t&&"admin"===a&&Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/admin",activeClassName:f.a.active,children:"Adminpage"})}),!t&&Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/login",activeClassName:f.a.active,children:"Login"})}),t&&"admin"===a&&Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/register",activeClassName:f.a.active,children:"Register"})}),t&&"employee"===a&&Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/homepage",onClick:function(){},activeClassName:f.a.active,children:" Home"})}),t&&"employee"===a&&Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/updateprofile",activeClassName:f.a.active,children:" Update Profile"})}),t&&Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/login",onClick:n,activeClassName:f.a.active,children:" Logout"})})]})})]})},y=function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsx)("main",{className:x.a.main,children:e.children}),Object(p.jsx)(h,{})]})},w=a(15),S=a.n(w),k=a(3),_=a.n(k),N=[{id:"id",label:"id",sort:!0},{id:"name",label:"name",sort:!0},{id:"email",label:"email",sort:!0},{id:"edit",label:"edit",sort:!1},{id:"delete",label:"delete",sort:!1}];function C(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function E(e,t){return"desc"===e?function(e,a){return C(e,a,t)}:function(e,a){return-C(e,a,t)}}function I(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}var F=function(){var e=Object(l.g)(),t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(""),i=Object(d.a)(s,2),m=i[0],b=i[1],h=Object(n.useState)("asc"),O=Object(d.a)(h,2),x=O[0],g=O[1],f=Object(n.useState)("id"),v=Object(d.a)(f,2),w=v[0],k=v[1],C=Object(n.useState)(N),F=Object(d.a)(C,2),A=F[0],P=(F[1],Object(n.useState)(!1)),L=Object(d.a)(P,2),T=L[0],D=L[1],U=r.a.useState(3),q=Object(d.a)(U,2),B=q[0],z=(q[1],r.a.useState(0)),J=Object(d.a)(z,2),M=J[0],G=J[1],K=localStorage.getItem("token"),H=localStorage.getItem("usertype");console.log(H);var R="asc"===x?"up":"down",X=function(){var t=Object(j.a)(u.a.mark((function t(){var a,n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),t.prev=1,t.next=4,fetch("/admingetdata",{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(K)}});case 4:return a=t.sent,t.next=7,a.json();case 7:if(n=t.sent,400!==a.status){t.next=10;break}throw new Error(n.error);case 10:console.log(n),r=n.filter((function(e){return"admin"!==e.usertype})),(c=r.map((function(e){return e}))).forEach((function(e,t){e.id=t})),console.log(c),o(c),t.next=25;break;case 18:t.prev=18,t.t0=t.catch(1),localStorage.removeItem("token"),localStorage.removeItem("userEmail"),localStorage.removeItem("usertype"),alert(t.t0),e.push("/login");case 25:D(!1);case 26:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){X()}),[]);var Q=function(){var e=Object(j.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,fetch("/deletebyadmin/".concat(t),{method:"DELETE"});case 4:return a=e.sent,e.next=7,a.json();case 7:if(n=e.sent,console.log(n),400!==a.status){e.next=11;break}throw new Error(n.error);case 11:alert("successfully"),X(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e){return e.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase())}))};console.log(x,w);var Y=W(c).length,V=parseInt(Y/B);console.log(e.location);var Z=1;return e.location.hash&&(Z=e.location.hash.replace("#",""),Z=parseInt(Z)),console.log(Z),null===K||"admin"!==H?Object(p.jsx)(l.a,{to:"/login"}):Object(p.jsx)(y,{children:Object(p.jsxs)("div",{className:S.a.card,children:[T&&Object(p.jsx)("p",{"text-align":"center",children:"loading..."}),Object(p.jsx)("div",{className:S.a.actions,children:Object(p.jsx)("button",{onClick:function(){e.push("/register")},children:"Add user"})}),Object(p.jsx)("div",{className:_.a.control,children:Object(p.jsx)("input",{type:"text",placeholder:"Search...",onKeyUp:function(e){b(e.target.value)}})}),!T&&0!==c.length&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("table",{id:"example",class:"table  table-bordered",children:[Object(p.jsx)("thead",{children:Object(p.jsx)("tr",{children:A.map((function(e,t){return Object(p.jsxs)("th",{onClick:function(){return function(e,t){if(!t)return null;g(w===e&&"asc"===x?"desc":"asc"),k(e)}(e.id,e.sort)},children:[e.label,w===e.id&&e.sort&&Object(p.jsx)("i",{className:"fas fa-long-arrow-alt-".concat(R)})]},e.id)}))})}),Object(p.jsx)("tbody",{children:I(W(c),E(x,w)).slice(M*B,M*B+B).map((function(t,a){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.id}),Object(p.jsx)("td",{children:t.name}),Object(p.jsx)("td",{children:t.email}),Object(p.jsx)("td",{className:S.a.actions,children:Object(p.jsx)("button",{onClick:function(){return a=t.email,console.log(a),void e.push("/editEmployee/".concat(a));var a},children:"Edit"})}),Object(p.jsx)("td",{className:S.a.actions,children:Object(p.jsx)("button",{className:S.a.delete,onClick:function(){return Q(t.email)},children:"Delete"})})]},t.id)}))})]}),Object(p.jsx)("nav",{className:S.a.navpage,"aria-label":"Page navigation example",children:Object(p.jsxs)("ul",{class:"pagination",children:[M>0&&Object(p.jsx)("li",{class:"page-item ",onClick:function(e,t){G(M-1),Z--},children:Object(p.jsx)("a",{class:"page-link",href:"#".concat(Z-1),children:"Previous"})}),Array(V+1).fill(1).map((function(e,t){return Object(p.jsx)("li",{class:"page-item ",id:"pages",onClick:function(){return G(e=t),void(Z=e);var e},children:Object(p.jsx)("a",{class:"page-link",href:"#".concat(t+1),children:t+1})},t)})),M<V&&Object(p.jsx)("li",{class:"page-item",onClick:function(e,t){G(M+1),Z+=1},children:Object(p.jsx)("a",{class:"page-link",href:"#".concat(Z+1),children:"Next"})})]})})]})]})})},A=a(34),P=a.n(A),L=a(35),T=a.n(L),D=function(e){return Object(p.jsx)("div",{className:T.a.card,children:e.children})},U=function(){var e=Object(l.g)(),t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],o=localStorage.getItem("token"),s=(localStorage.getItem("userEmail"),localStorage.getItem("usertype")),i=function(){var t=Object(j.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/getUsers/me",{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(o)}});case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,console.log(n),c(n.name),t.next=17;break;case 11:t.prev=11,t.t0=t.catch(0),localStorage.removeItem("token"),localStorage.removeItem("userEmail"),alert(t.t0),e.push("/login");case 17:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),null===o||"employee"!==s?Object(p.jsx)(l.a,{to:"/login"}):Object(p.jsx)(y,{children:Object(p.jsx)(D,{children:Object(p.jsx)("div",{className:P.a.typography,children:Object(p.jsxs)("h1",{children:["Welcome ",r]})})})})},q=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("usertype"),a=Object(l.g)(),r=Object(n.useState)(""),c=Object(d.a)(r,2),o=c[0],s=c[1],i=Object(n.useState)(""),m=Object(d.a)(i,2),b=m[0],h=m[1],O=function(){var t=Object(j.a)(u.a.mark((function t(n){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,fetch("/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:o,password:b})});case 4:return r=t.sent,t.next=7,r.json();case 7:if(c=t.sent,400!==r.status){t.next=10;break}throw new Error(c.error);case 10:console.log(c),e=localStorage.setItem("token",c.token),localStorage.setItem("userEmail",o),"admin"===c.usertype?(localStorage.setItem("usertype","admin"),alert("Admin Login Successfully!!"),a.push("/Admin")):(localStorage.setItem("usertype","employee"),alert("User Login Successfully!!"),a.push("/homepage")),s(""),h(""),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),alert(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}();return e&&"employee"===t?Object(p.jsx)(l.a,{to:"/homepage"}):e&&"admin"===t?Object(p.jsx)(l.a,{to:"/admin"}):Object(p.jsx)(y,{children:Object(p.jsx)(D,{children:Object(p.jsxs)("form",{onSubmit:O,children:[Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"email",children:"Email"}),Object(p.jsx)("input",{required:!0,type:"email",id:"email",value:o,onChange:function(e){s(e.target.value)}})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{required:!0,type:"password",id:"password",value:b,onChange:function(e){h(e.target.value)},minLength:"7"})]}),Object(p.jsx)("div",{className:_.a.actions,children:Object(p.jsx)("button",{className:"btn",children:"Login"})})]})})})},B=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("h1",{children:"Page not found"})})},z=a(16),J=a.n(z),M=function(){var e=Object(l.g)(),t=localStorage.getItem("token"),a=localStorage.getItem("usertype"),r=Object(n.useState)(""),c=Object(d.a)(r,2),o=c[0],s=c[1],i=Object(n.useState)(""),m=Object(d.a)(i,2),b=m[0],h=m[1],O=Object(n.useState)(""),x=Object(d.a)(O,2),g=x[0],f=x[1],v=Object(n.useState)(""),w=Object(d.a)(v,2),S=w[0],k=w[1],N=Object(n.useState)("employee"),C=Object(d.a)(N,2),E=C[0],I=C[1],F=Object(n.useState)(""),A=Object(d.a)(F,2),P=A[0],L=A[1],T=function(){var t=Object(j.a)(u.a.mark((function t(a){var n,r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),(n=new FormData).append("profile",P),n.append("name",o),n.append("email",b),n.append("password",g),n.append("usertype",E),g===S){t.next=9;break}return t.abrupt("return",alert("Password must be same!!"));case 9:return t.prev=9,t.next=12,J.a.post("/register",n,{method:"POST",headers:{"content-type":"multipart/form-data"}});case 12:return r=t.sent,t.next=15,r.data;case 15:if(!(c=t.sent).error){t.next=19;break}throw console.log(c),new Error(c.error);case 19:console.log("res:",c),alert("User Registation Successfully!!"),s(""),h(""),f(""),k(""),e.push("/login"),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(9),console.log(t.t0),alert(t.t0);case 29:case"end":return t.stop()}}),t,null,[[9,25]])})));return function(e){return t.apply(this,arguments)}}();return null===t||"admin"!==a?Object(p.jsx)(l.a,{to:"/login"}):Object(p.jsx)(y,{children:Object(p.jsx)(D,{children:Object(p.jsxs)("form",{onSubmit:T,children:[Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"name",children:"Name"}),Object(p.jsx)("input",{type:"text",id:"name",value:o,onChange:function(e){s(e.target.value)},required:!0})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"email",children:"Email"}),Object(p.jsx)("input",{required:!0,type:"email",id:"email",value:b,onChange:function(e){h(e.target.value)}})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{required:!0,type:"password",id:"password",value:g,onChange:function(e){f(e.target.value)},minLength:"7"})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"cpassword",children:"Confirm Password"}),Object(p.jsx)("input",{required:!0,type:"password",id:"cpassword",value:S,onChange:function(e){k(e.target.value)},minLength:"7"})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"profile",children:"Profile Image"}),Object(p.jsx)("input",{required:!0,type:"file",id:"profile",onChange:function(e){L(e.target.files[0])}})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{for:"users",children:"Type of user:"}),Object(p.jsxs)("select",{name:E,id:"users",children:[Object(p.jsx)("option",{value:"employee",onClick:function(e){I("employee")},children:"Employee"}),Object(p.jsx)("option",{value:"admin",onClick:function(e){I("admin")},children:"Admin"})]})]}),Object(p.jsxs)("div",{className:_.a.actions,children:[Object(p.jsx)("button",{children:"Register"}),"  \xa0 \xa0",Object(p.jsx)("button",{type:"button",onClick:function(){e.push("/admin")},className:_.a.delete,children:"Cancel"})]})]})})})},G=function(){var e=Object(l.g)(),t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(""),s=Object(d.a)(o,2),i=s[0],m=s[1],b=Object(n.useState)(""),h=Object(d.a)(b,2),O=h[0],x=h[1],g=Object(n.useState)(""),f=Object(d.a)(g,2),v=f[0],w=f[1],S=Object(n.useState)(""),k=Object(d.a)(S,2),N=k[0],C=k[1],E=localStorage.getItem("token"),I=localStorage.getItem("userEmail"),F=localStorage.getItem("usertype"),A="/users/".concat(I,"/avatar"),P=Date.now(),L=function(){var t=Object(j.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/getUsers/me",{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(E)}});case 3:return a=t.sent,t.next=6,a.json();case 6:if(n=t.sent,console.log(n),400!==a.status){t.next=12;break}throw localStorage.removeItem("token"),localStorage.removeItem("userEmail"),new Error(n.error);case 12:c(n.name),m(n.email),x(n.password),w(n.password),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),alert(t.t0),e.push("/login");case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){L()}),[]);return null===E||"employee"!==F?Object(p.jsx)(l.a,{to:"/login"}):Object(p.jsx)(y,{children:Object(p.jsx)(D,{children:Object(p.jsxs)("form",{children:[Object(p.jsx)("div",{className:_.a.imgcontrol,children:Object(p.jsx)("img",{src:"".concat(A,"?").concat(P),alt:"..."})}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"name",children:"Name"}),Object(p.jsx)("input",{type:"text",id:"name",value:r,onChange:function(e){c(e.target.value)},required:!0})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"email",children:"Email"}),Object(p.jsx)("input",{required:!0,type:"email",id:"email",value:i,onChange:function(e){m(e.target.value)}})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{required:!0,type:"password",id:"password",value:O,onChange:function(e){x(e.target.value)},minLength:"7"})]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"profile",children:"Profile Image"}),Object(p.jsx)("input",{type:"file",id:"profile",onChange:function(e){C(e.target.files[0])}})]}),Object(p.jsxs)("div",{className:_.a.actions,children:[Object(p.jsx)("button",{onClick:function(e){e.preventDefault();var t=new FormData;N&&t.append("image",N),t.append("name",r),t.append("email",i),O!==v&&t.append("password",O),function(){var e=Object(j.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.a.patch("/updateUser/me",t,{method:"PATCH",headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(E)}});case 3:return a=e.sent,e.next=6,a.data;case 6:if(!(n=e.sent).error){e.next=10;break}throw console.log(n),new Error(n.error);case 10:console.log("res:",n),localStorage.setItem("userEmail",i),alert("User updated successfully"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),alert(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}()().then((function(){L(),x("")})).catch((function(e){alert(e)}))},children:"Update Details"}),"\xa0\xa0",Object(p.jsx)("button",{onClick:function(t){t.preventDefault(),function(){var t=Object(j.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/deleteUser/me",{method:"DELETE",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(E)}});case 3:return a=t.sent,t.next=6,a.json();case 6:if(n=t.sent,console.log(n),500!==a.status){t.next=10;break}throw new Error("failed to delete user!");case 10:localStorage.removeItem("userEmail"),localStorage.removeItem("token"),alert("User deleted successfully"),e.push("/login"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),alert(t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}()()},className:_.a.delete,children:"Delate Account"})]}),Object(p.jsx)("div",{className:_.a.actions_delete})]})]})})})},K=function(){return localStorage.removeItem("token"),Object(p.jsx)("h1",{children:"logout"})},H=function(e){var t=Object(l.g)(),a=localStorage.getItem("token"),r=localStorage.getItem("usertype"),c=Object(n.useState)(""),o=Object(d.a)(c,2),s=o[0],i=o[1],m=Object(n.useState)(""),b=Object(d.a)(m,2),h=b[0],O=b[1],x=Object(n.useState)(""),g=Object(d.a)(x,2),f=g[0],v=g[1],w=Object(n.useState)(""),S=Object(d.a)(w,2),k=S[0],N=S[1],C=Object(n.useState)(""),E=Object(d.a)(C,2),I=E[0],F=E[1],A=Object(l.h)();console.log(A.email);var P="/users/".concat(A.email,"/avatar"),L=Date.now(),T=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/getdata/".concat(A.email),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,400!==t.status){e.next=12;break}throw localStorage.removeItem("token"),localStorage.removeItem("userEmail"),localStorage.removeItem("usertype"),new Error(n.error);case 12:console.log(n),i(n.name),O(n.email),v(n.password),N(n.password),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),alert(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){T()}),[]);var U=function(){var e=Object(j.a)(u.a.mark((function e(a){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=new FormData,I&&n.append("image",I),n.append("name",s),n.append("email",h),f!==k&&n.append("password",f),e.prev=6,e.next=9,J.a.patch("/updateEmployee/".concat(A.email),n,{method:"PATCH",headers:{"content-type":"multipart/form-data"}});case 9:return r=e.sent,e.next=12,r.data;case 12:if(!(c=e.sent).error){e.next=16;break}throw console.log(c),new Error(c.error);case 16:console.log("res:",c),alert("User Update Successfully!!"),i(""),O(""),v(""),t.replace("/admin"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),alert(e.t0);case 25:case"end":return e.stop()}}),e,null,[[6,22]])})));return function(t){return e.apply(this,arguments)}}();return null===a||"admin"!==r?Object(p.jsx)(l.a,{to:"/login"}):Object(p.jsx)(y,{children:Object(p.jsx)(D,{children:Object(p.jsxs)("form",{onSubmit:U,children:[Object(p.jsx)("div",{className:_.a.imgcontrol,children:Object(p.jsx)("img",{src:"".concat(P,"?").concat(L),alt:"..."})}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"name",children:"Name"}),Object(p.jsx)("input",{type:"text",id:"name",value:s,onChange:function(e){i(e.target.value)},required:!0})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"email",children:"Email"}),Object(p.jsx)("input",{required:!0,type:"email",id:"email",value:h,onChange:function(e){O(e.target.value)}})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{required:!0,type:"password",id:"password",value:f,onChange:function(e){v(e.target.value)},minLength:"7"})]}),Object(p.jsxs)("div",{className:_.a.control,children:[Object(p.jsx)("label",{htmlFor:"profile",children:"Profile Image"}),Object(p.jsx)("input",{type:"file",id:"profile",onChange:function(e){F(e.target.files[0])}})]}),Object(p.jsxs)("div",{className:_.a.actions,children:[Object(p.jsx)("button",{className:"btn",children:"Update"})," \xa0",Object(p.jsx)("button",{type:"button",onClick:function(){t.push("/admin")},className:"btn",children:"Cancel"})]})]})})})};a(69);var R=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(s.a,{children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/",exact:!0,children:Object(p.jsx)(l.a,{to:"/login"})}),Object(p.jsx)(l.b,{path:"/admin",component:F}),Object(p.jsx)(l.b,{path:"/editEmployee/:email",component:H}),Object(p.jsx)(l.b,{path:"/login",component:q}),Object(p.jsx)(l.b,{path:"/register",component:M}),Object(p.jsx)(l.b,{path:"/homepage",component:U}),Object(p.jsx)(l.b,{path:"/updateprofile",component:G}),Object(p.jsx)(l.b,{path:"/logout",component:K}),Object(p.jsx)(l.b,{path:"*",children:Object(p.jsx)(B,{})})]})})})},X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};a(70);o.a.render(Object(p.jsx)(R,{}),document.getElementById("root")),X()}},[[71,1,2]]]);
//# sourceMappingURL=main.5aa47d97.chunk.js.map